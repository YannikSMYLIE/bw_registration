<div class="slots">
    <div class="small text-muted">Bitte w채hlen Sie zuerst ein Datum:</div>
    <div class="dates">
        <f:for each="{event.slotsByDate}" key="date" as="slot" iteration="iter">
            <f:if condition="{iter.isFirst}">
                <f:then>
                    <button class="btn btn-primary date my-1" data-date="{date}">{date}</button>
                </f:then>
                <f:else>
                    <button class="btn btn-secondary date my-1" data-date="{date}">{date}</button>
                </f:else>
            </f:if>
        </f:for>
    </div>

    <div class="mt-2 small text-muted">Bitte w채hlen Sie nun einen Zeitraum:</div>
    <div class="row times">
        <f:for each="{event.slotsByDate}" key="date" as="slots" iteration="iter">
            <f:for each="{slots}" as="slot">
                <f:if condition="{iter.isFirst}">
                    <f:then>
                        <div class="col-6 col-md-3 col-xl-2" data-date="{date}">
                            <f:render section="slotContainer" arguments="{_all}" />
                        </div>
                    </f:then>
                    <f:else>
                        <div class="col-6 col-md-3 col-xl-2 d-none" data-date="{date}">
                            <f:render section="slotContainer" arguments="{_all}" />
                        </div>
                    </f:else>
                </f:if>
            </f:for>
        </f:for>
    </div>
</div>


<!-- Slots -->
<f:section name="slotContainer">
    <f:if condition="{slot.isBookable}">
        <f:then>
            <f:render section="slot" arguments="{slot : slot, registration : registration}" />
        </f:then>
        <f:else>
            <div style="opacity: 0.5">
                <f:render section="slot" arguments="{slot : slot, registration : registration}" />
            </div>
        </f:else>
    </f:if>
</f:section>
<f:section name="slot">
    <div class="card mb-3">
        <label class="form-check-label" for="slot-{slot.uid}">
            <div class="card-body text-center slot p-1" data-free-seats="{slot.freePersons}">
                <f:render partial="Slot/Datetime" arguments="{slot : slot}" />
                <f:if condition="{slot.isBookable}">
                    <f:then>
                        <f:if condition="!{slot.event.secret}">
                            <div class="small">
                                <f:if condition="{slot.freePersons} == 1">
                                    <f:then>Noch {slot.freePersons} Platz frei</f:then>
                                    <f:else>Noch {slot.freePersons} Pl채tze frei</f:else>
                                </f:if>
                            </div>
                        </f:if>
                        <div>
                            <f:if condition="{registration} && {registration.persons -> f:count()} > {slot.freePersons}">
                                <f:then>
                                    <f:form.radio value="{slot.uid}" property="slot" id="slot-{slot.uid}" disabled="1" additionalAttributes="{required : 1}" />
                                </f:then>
                                <f:else>
                                    <f:form.radio value="{slot.uid}" property="slot" id="slot-{slot.uid}" additionalAttributes="{required : 1}" />
                                </f:else>
                            </f:if>
                        </div>
                    </f:then>
                    <f:else>
                        <div class="my-2 small text-warning">Leider alle Pl채tze belegt</div>
                    </f:else>
                </f:if>
            </div>
        </label>
    </div>
</f:section>